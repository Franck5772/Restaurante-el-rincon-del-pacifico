(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{24436:function(e,a,t){Promise.resolve().then(t.bind(t,99257))},56157:function(e,a,t){"use strict";t.d(a,{p:function(){return o}});let o=[{id:"encocado-pescado",name:"Encocado de Pescado",description:"Delicioso pescado en salsa de coco con hierbas y especias del Pac\xedfico",price:95,imageUrl:"\uD83D\uDC1F",categoryId:"mariscos",available:!0,featured:!0},{id:"ceviche-pacifico",name:"Ceviche del Pac\xedfico",description:"Pescado fresco marinado en lim\xf3n, coco y hierbas arom\xe1ticas del Pac\xedfico",price:85,imageUrl:"\uD83D\uDC1F",categoryId:"mariscos",available:!0},{id:"camarones-encocados",name:"Camarones Encocados",description:"Camarones en deliciosa salsa de coco con especias del Pac\xedfico",price:110,imageUrl:"\uD83E\uDD90",categoryId:"mariscos",available:!0},{id:"pescado-aborrajado",name:"Pescado Aborrajado",description:"Filete de pescado envuelto en masa de pl\xe1tano maduro y frito",price:120,imageUrl:"\uD83D\uDC20",categoryId:"mariscos",available:!0},{id:"cazuela-mariscos",name:"Cazuela de Mariscos",description:"Deliciosa combinaci\xf3n de mariscos en salsa de coco con especias",price:140,imageUrl:"\uD83E\uDD9E",categoryId:"mariscos",available:!0,featured:!0},{id:"agua-coco",name:"Agua de Coco",description:"Agua de coco natural y refrescante",price:35,imageUrl:"\uD83E\uDD65",categoryId:"bebidas",available:!0},{id:"limonada-coco",name:"Limonada de Coco",description:"Refrescante limonada con leche de coco",price:40,imageUrl:"\uD83C\uDF79",categoryId:"bebidas",available:!0,featured:!0},{id:"jugo-boroj\xf3",name:"Jugo de Boroj\xf3",description:"Energizante jugo de fruta t\xedpica del Pac\xedfico colombiano",price:45,imageUrl:"\uD83E\uDDC3",categoryId:"bebidas",available:!0},{id:"arroz-coco",name:"Arroz con Coco",description:"Tradicional arroz cocinado en leche de coco",price:35,imageUrl:"\uD83C\uDF5A",categoryId:"extras",available:!0,featured:!0},{id:"patacones",name:"Patacones",description:"Pl\xe1tano verde frito y aplastado, t\xedpico del Pac\xedfico colombiano",price:30,imageUrl:"\uD83C\uDF4C",categoryId:"extras",available:!0},{id:"aborrajados",name:"Aborrajados",description:"Pl\xe1tano maduro relleno de queso y frito",price:40,imageUrl:"\uD83E\uDDC0",categoryId:"extras",available:!0}]},42661:function(e,a,t){"use strict";t.d(a,{SM:function(){return c},Zp:function(){return u},u0:function(){return l},y0:function(){return m}});var o=t(56157);let r="current_order";function n(){try{let e=localStorage.getItem(r);if(!e)return null;return JSON.parse(e)}catch(e){return console.error("Error al obtener el pedido actual:",e),null}}function s(e){try{localStorage.setItem(r,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("orderUpdated",{detail:e}))}catch(e){console.error("Error al guardar el pedido actual:",e)}}function l(e,a,t){let r=n()||function(){let e={id:crypto.randomUUID(),items:[],totalAmount:0,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return s(e),e}(),l=o.p.find(a=>a.id===e);if(!l)throw Error("\xcdtem con ID ".concat(e," no encontrado"));let c=r.items.findIndex(a=>a.id===e&&(t||"")===(a.specialInstructions||""));if(c>=0)r.items[c].quantity+=a;else{let o={id:e,menuItemId:e,name:l.name,price:l.price,quantity:a,specialInstructions:t};r.items.push(o)}return r.totalAmount=i(r),r.updatedAt=new Date().toISOString(),s(r),r}function i(e){return e.items.reduce((e,a)=>e+a.price*a.quantity,0)}function c(){try{let e=localStorage.getItem("restaurant_orders");return e?JSON.parse(e):[]}catch(e){return console.error("Error al obtener historial de pedidos:",e),[]}}function d(){try{let e=n();if(!e){localStorage.setItem("orderDetails",JSON.stringify([]));let e=new CustomEvent("orderDetailsUpdated",{detail:JSON.stringify([])});window.dispatchEvent(e);return}let a=e.items.map(e=>({name:e.name,quantity:e.quantity,price:e.price,id:e.menuItemId,categoryId:function(e){let a=o.p.find(a=>a.id===e);return null==a?void 0:a.categoryId}(e.menuItemId),specialInstructions:e.specialInstructions})),t=JSON.stringify(a);localStorage.setItem("orderDetails",t);let r=new CustomEvent("orderDetailsUpdated",{detail:t});window.dispatchEvent(r)}catch(e){console.error("Error al sincronizar con OrderDetails:",e)}}function u(e){let a=function(e){let a=n();if(!a)throw Error("No hay un pedido activo");return a.items=a.items.filter(a=>a.id!==e),a.totalAmount=i(a),a.updatedAt=new Date().toISOString(),s(a),a}(e);return d(),a}function m(){!function(){try{localStorage.removeItem(r),window.dispatchEvent(new CustomEvent("orderUpdated",{detail:null}))}catch(e){console.error("Error al limpiar el pedido actual:",e)}}(),d()}},51560:function(e,a,t){"use strict";t.d(a,{GN:function(){return i}});let o={"menu-change":"/sounds/menu-change.mp3","add-to-cart":"/sounds/add-to-cart.mp3",highlight:"/sounds/highlight.mp3",error:"/sounds/error.mp3",success:"/sounds/success.mp3"},r=new Map,n=!1,s=!1;function l(){if(s||n)return Promise.resolve();n=!0;let e=[];return Object.entries(o).forEach(a=>{let[t,o]=a;if(r.has(t))return;let n=new Audio(o);n.preload="auto";let s=new Promise(e=>{let a=()=>{r.set(t,n),n.removeEventListener("canplaythrough",a),e()};if(n.readyState>=3){r.set(t,n),e();return}n.addEventListener("canplaythrough",a),n.addEventListener("error",()=>{console.warn("Error al cargar sonido: ".concat(o)),e()})});e.push(s)}),Promise.all(e).then(()=>{s=!0,n=!1,console.log("\uD83D\uDD0A Todos los sonidos precargados correctamente")}).catch(e=>{console.error("Error al precargar sonidos:",e),n=!1})}function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{let t=r.get(e);if(!t){let a=o[e];if(!a)return console.warn("Tipo de sonido no v\xe1lido: ".concat(e)),!1;t=new Audio(a),r.set(e,t)}let n=t.cloneNode();n.volume=Math.min(1,Math.max(0,a));let s=n.play();return void 0!==s&&s.catch(a=>{console.warn("Error al reproducir sonido (".concat(e,"):"),a)}),!0}catch(a){return console.error("Error al reproducir sonido (".concat(e,"):"),a),!1}}"complete"===document.readyState?l():window.addEventListener("load",()=>{setTimeout(l,1e3)})},99257:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return eq}});var o,r,n,s,l,i,c=t(16966),d=t(89411),u=t.n(d),m=t(36879),p=t(62335),g=t(87358);let h=e=>{console.log("[updateOrderTool] Invocado con par\xe1metros:",e);let a=new Promise(e=>{setTimeout(()=>{e("Operaci\xf3n completada con timeout de seguridad")},5e3)});return Promise.race([new Promise(a=>{try{if(!e||"object"!=typeof e){console.error("[updateOrderTool] Error: Par\xe1metros inv\xe1lidos"),a("Error: No se proporcion\xf3 informaci\xf3n de la orden");return}let{orderData:t,orderDetailsData:o,...r}=e,n=[];if(o){if(console.log("[updateOrderTool] Usando orderDetailsData expl\xedcito"),"string"==typeof o)try{n=JSON.parse(o)}catch(e){console.error("[updateOrderTool] Error al parsear JSON:",e),a("Error: Formato de datos inv\xe1lido");return}else n=Array.isArray(o)?o:[o]}else if(t){if(console.log("[updateOrderTool] Usando orderData"),Array.isArray(t))n=t;else if("object"==typeof t){if(t.items&&Array.isArray(t.items))n=t.items;else{let e=[];for(let a in t)if("object"==typeof t[a]){let o={...t[a],id:a};e.push(o)}n=e.length>0?e:[t]}}else if("string"==typeof t)try{let e=JSON.parse(t);if(Array.isArray(e))n=e;else if("object"==typeof e){if(e.items&&Array.isArray(e.items))n=e.items;else{let a=[];for(let t in e)if("object"==typeof e[t]){let o={...e[t],id:t};a.push(o)}n=a.length>0?a:[e]}}}catch(e){console.error("[updateOrderTool] Error al parsear JSON:",e),a("Error: Formato de datos inv\xe1lido");return}}else for(let e in console.log("[updateOrderTool] Buscando datos de orden en cualquier par\xe1metro"),r){let a=r[e];if(Array.isArray(a)){n=a;break}if(a&&"object"==typeof a){if(a.items&&Array.isArray(a.items)){n=a.items;break}n=[a];break}}let s=n.filter(e=>{if(!e||"object"!=typeof e)return console.warn("[updateOrderTool] Item inv\xe1lido:",e),!1;if(!e.name||""===e.name.trim())return console.warn("[updateOrderTool] Item sin nombre:",e),!1;if("number"!=typeof e.quantity||e.quantity<=0){if(console.warn("[updateOrderTool] Item con cantidad inv\xe1lida:",e),"string"==typeof e.quantity)try{e.quantity=parseInt(e.quantity,10),(isNaN(e.quantity)||e.quantity<=0)&&(e.quantity=1)}catch(a){e.quantity=1}else e.quantity=1}return"number"==typeof e.price&&!(e.price<0)||(console.warn("[updateOrderTool] Item con precio inv\xe1lido:",e),!1)}).map(e=>({name:e.name,quantity:e.quantity,price:e.price,id:e.id||void 0,categoryId:e.categoryId||void 0,specialInstructions:e.specialInstructions||void 0}));if(0===s.length){console.warn("[updateOrderTool] No hay items v\xe1lidos en la orden"),a("Error: No hay productos v\xe1lidos en la orden");return}console.log("[updateOrderTool] Items validados:",s);let l=JSON.stringify(s);localStorage.setItem("orderDetails",l),console.log("[updateOrderTool] Disparando evento con orden:",l);{let e=new CustomEvent("orderDetailsUpdated",{detail:l});window.dispatchEvent(e)}let i=s.reduce((e,a)=>e+a.price*a.quantity,0);a("Detalles del pedido actualizados correctamente. Total: $".concat(i.toFixed(2)))}catch(e){console.error("[updateOrderTool] Error al procesar la orden:",e),a("Error interno al procesar la orden")}}),a])},x=e=>{console.log("[highlightProductTool] Llamada recibida con par\xe1metros:",JSON.stringify(e,null,2));try{let a,t;if("string"==typeof e)try{let o=JSON.parse(e);a=o.productId||"",t=o.category}catch(t){a=e}else if(e&&"object"==typeof e){if("productId"in e)a=e.productId;else if("id"in e)a=e.id;else if("product"in e)a=e.product;else if("name"in e)a=e.name.toLowerCase().replace(/\s+/g,"-");else{let t=Object.keys(e).find(e=>e.toLowerCase().includes("id")||e.toLowerCase().includes("product"));if(t)a=e[t];else throw Error("No se pudo extraer un ID de producto v\xe1lido de los par\xe1metros")}"category"in e?t=e.category:"categoryId"in e&&(t=e.categoryId)}else throw Error("Formato de par\xe1metros no v\xe1lido");if(!a)return console.error("[highlightProductTool] Error: ID de producto no proporcionado"),Promise.resolve("Error: ID de producto no proporcionado");a=a.toString().toLowerCase().trim();let o={pastor:"taco-pastor","al pastor":"taco-pastor",suadero:"taco-suadero","taco suadero":"taco-suadero",bistec:"taco-bistec","taco bistec":"taco-bistec",campechano:"taco-campechano","taco campechano":"taco-campechano",carnitas:"taco-carnitas","taco carnitas":"taco-carnitas",horchata:"agua-horchata","agua horchata":"agua-horchata",jamaica:"agua-jamaica","agua jamaica":"agua-jamaica",refresco:"refresco",guacamole:"guacamole",quesadilla:"quesadilla",queso:"queso-extra","queso extra":"queso-extra",cebollitas:"cebollitas"};o[a]&&(console.log("[highlightProductTool] Mapeando ID: ".concat(a," -> ").concat(o[a])),a=o[a]),console.log("[highlightProductTool] Resaltando producto: ".concat(a),t?"Categor\xeda: ".concat(t):"");let r=new CustomEvent("highlightProduct",{detail:{productId:a,category:t}});return window.dispatchEvent(r),console.log("[highlightProductTool] Evento highlightProduct despachado correctamente"),Promise.resolve("Producto ".concat(a," resaltado correctamente."))}catch(e){return console.error("[highlightProductTool] Error al resaltar producto:",e),Promise.resolve("Error al resaltar el producto.")}},f=e=>{console.log("[processPaymentTool] Llamada recibida con par\xe1metros:",JSON.stringify(e,null,2));try{console.log("[processPaymentTool] Iniciando proceso de pago");let e=new CustomEvent("processPayment",{detail:{timestamp:new Date().toISOString()}});return window.dispatchEvent(e),console.log("[processPaymentTool] Evento processPayment despachado correctamente"),Promise.resolve("Procesamiento de pago iniciado correctamente.")}catch(e){return console.error("[processPaymentTool] Error al procesar el pago:",e),Promise.resolve("Error al procesar el pago del pedido.")}},b=null,y=new Set(["debug"]);function v(e){try{console.log("[handleToolInvocation] Evento de invocaci\xf3n recibido:",e);let a=e.detail||{},t=a.tool,o=a.parameters;if(!t&&a.toolName&&(t=a.toolName,o=a.parameters||a.args),!t){console.warn("[handleToolInvocation] No se especific\xf3 ninguna herramienta en el evento de invocaci\xf3n:",a);return}switch(console.log("[handleToolInvocation] Invocando herramienta: ".concat(t),o),t){case"updateOrder":try{console.log("[handleToolInvocation] Ejecutando updateOrderTool");let e=h(o);console.log("[handleToolInvocation] Resultado de updateOrderTool:",e)}catch(e){console.error("[handleToolInvocation] Error al actualizar el pedido:",e)}break;case"highlightProduct":try{console.log("[handleToolInvocation] Ejecutando highlightProductTool");let e=x(o);console.log("[handleToolInvocation] Resultado de highlightProductTool:",e)}catch(e){console.error("[handleToolInvocation] Error al resaltar el producto:",e)}break;case"processPayment":try{console.log("[handleToolInvocation] Ejecutando processPaymentTool");let e=f(o);console.log("[handleToolInvocation] Resultado de processPaymentTool:",e)}catch(e){console.error("[handleToolInvocation] Error al procesar el pago:",e)}break;default:console.warn("[handleToolInvocation] Herramienta desconocida: ".concat(t))}}catch(e){console.error("[handleToolInvocation] Error al procesar la invocaci\xf3n de herramienta:",e)}}async function j(e,a){try{a&&console.log("Using model ".concat(e.model));let t=await fetch("/api/ultravox",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})});if(!t.ok){let e=await t.text();throw Error("HTTP error! status: ".concat(t.status,", message: ").concat(e))}let o=await t.json();return a&&console.log("Call created. Join URL: ".concat(o.joinUrl)),o}catch(e){throw console.error("Error creating call:",e),e}}async function w(e,a,t){let o=(await j(a,t)).joinUrl;localStorage.removeItem("currentOrder"),window.dispatchEvent(new CustomEvent("callEnded")),console.log("[startCall] Pedido reseteado");try{console.log("Iniciando llamada..."),window.addEventListener("tool-invocation",v),console.log("[startCall] Listener para eventos tool-invocation registrado"),b=new g.Fk({experimentalMessages:y}),console.log("[startCall] Registrando herramientas del cliente...");try{console.log("[startCall] Registrando herramienta updateOrder..."),b.registerToolImplementation("updateOrder",h),console.log("[startCall] Herramienta updateOrder registrada exitosamente"),console.log("[startCall] Registrando herramienta highlightProduct..."),b.registerToolImplementation("highlightProduct",x),console.log("[startCall] Herramienta highlightProduct registrada exitosamente"),console.log("[startCall] Registrando herramienta processPayment..."),b.registerToolImplementation("processPayment",f),console.log("[startCall] Herramienta processPayment registrada exitosamente")}catch(e){throw console.error("[startCall] Error al registrar herramientas:",e),Error("Error al registrar herramientas: "+(e instanceof Error?e.message:String(e)))}b.addEventListener("status",a=>{console.log("[startCall] Estado de llamada: ".concat(null==b?void 0:b.status)),(null==b?void 0:b.status)&&e.onStatusChange(b.status)}),b.addEventListener("transcripts",()=>{(null==b?void 0:b.transcripts)&&e.onTranscriptChange&&e.onTranscriptChange(b.transcripts)}),b.addEventListener("experimental_message",a=>{e.onDebugMessage&&e.onDebugMessage(a)}),b.addEventListener("toolInvocation",v),b.joinCall(o),console.log("[startCall] Llamada iniciada:",b.status)}catch(e){throw console.error("Error al unirse a la llamada:",e),Error("Error de uni\xf3n: "+(e instanceof Error?e.message:String(e)))}}new EventTarget,(o=s||(s={})).USER="USER",o.ASSISTANT="ASSISTANT",o.TOOL_CALL="TOOL_CALL",o.TOOL_RESULT="TOOL_RESULT",(r=l||(l={})).UNSPECIFIED="PARAMETER_LOCATION_UNSPECIFIED",r.QUERY="PARAMETER_LOCATION_QUERY",r.PATH="PARAMETER_LOCATION_PATH",r.HEADER="PARAMETER_LOCATION_HEADER",r.BODY="PARAMETER_LOCATION_BODY",(n=i||(i={})).UNSPECIFIED="KNOWN_PARAM_UNSPECIFIED",n.CALL_ID="KNOWN_PARAM_CALL_ID",n.CONVERSATION_HISTORY="KNOWN_PARAM_CONVERSATION_HISTORY";let N=[{temporaryTool:{modelToolName:"updateOrder",description:"Actualiza los detalles del pedido. Se usa cada vez que se agregan o eliminan art\xedculos o cuando se finaliza el pedido. Llama a esta herramienta cada vez que el usuario actualice su pedido.",dynamicParameters:[{name:"orderDetailsData",location:l.BODY,schema:{description:"Un array de objetos que contienen los art\xedculos del pedido.",type:"array",items:{type:"object",properties:{name:{type:"string",description:"El nombre del art\xedculo que se a\xf1adir\xe1 al pedido."},quantity:{type:"number",description:"La cantidad del art\xedculo para el pedido."},specialInstructions:{type:"string",description:"Cualquier instrucci\xf3n especial relacionada con el art\xedculo."},price:{type:"number",description:"El precio unitario del art\xedculo."}},required:["name","quantity","price"]}},required:!0}],client:{}}},{temporaryTool:{modelToolName:"highlightProduct",description:"Resalta un producto espec\xedfico en la interfaz de usuario sin a\xf1adirlo al pedido. \xdasalo para mostrar visualmente un producto cuando el usuario pide informaci\xf3n o cuando quieras hacer una recomendaci\xf3n.",dynamicParameters:[{name:"productId",location:l.BODY,schema:{description:"ID \xfanico del producto a resaltar",type:"string"},required:!0}],client:{}}},{temporaryTool:{modelToolName:"processPayment",description:"Inicia el proceso de registro del pedido actual. Usar cuando el cliente desee finalizar su pedido y proporcionar sus datos de contacto.",dynamicParameters:[],client:{}}},{temporaryTool:{modelToolName:"paymentInput",description:"Permite capturar datos espec\xedficos para el formulario de contacto que el usuario proporciona verbalmente.",dynamicParameters:[{name:"field",location:l.BODY,schema:{description:"Campo del formulario de contacto a completar (clientName, email, phone)",type:"string",enum:["clientName","email","phone","nombre","correo","tel\xe9fono"]},required:!0},{name:"value",location:l.BODY,schema:{description:"Valor que el usuario proporciona para el campo indicado",type:"string"},required:!0}],client:{}}},{temporaryTool:{modelToolName:"completePayment",description:"Completa el proceso de registro con los datos ya ingresados. Usar cuando el usuario indique que ya ha terminado de proporcionar todos los datos necesarios.",dynamicParameters:[],client:{}}}],E={title:"Restaurante El Rinc\xf3n del Pac\xedfico",overview:"Este agente ha sido programado para facilitar pedidos en un restaurante de comida del Pac\xedfico llamado 'El Rinc\xf3n del Pac\xedfico'.",callConfig:{model:"fixie-ai/ultravox-70B",languageHint:"es",systemPrompt:'\n  # Configuraci\xf3n del Sistema de Pedidos - Restaurante "El Rinc\xf3n del Pac\xedfico"\n\n  ## Rol del Agente\n  - Nombre: Asistente de "El Rinc\xf3n del Pac\xedfico"\n  - Contexto: Sistema de toma de pedidos por voz con salida TTS e interfaz visual\n  - Hora actual: '.concat(new Date,'\n  - Personalidad: Amable, paciente, usa lenguaje coloquial mexicano\n  \n  ## REGLA CR\xcdTICA DE IDIOMA\n  - SIEMPRE debes responder en espa\xf1ol mexicano, NUNCA en ingl\xe9s u otro idioma\n  - Si el usuario habla en otro idioma, responde siempre en espa\xf1ol y dile amablemente que solo hablas espa\xf1ol\n  - NUNCA uses s\xedmbolos especiales, caracteres raros o emojis en tus respuestas habladas\n  - NUNCA leas literalmente marcadores especiales como "[", "]", "(", ")", "/*", "*/"\n  - Si no entiendes algo, pide aclaraci\xf3n en espa\xf1ol de manera natural\n\n  ## Men\xfa del Pac\xedfico (SOLO MENCIONA ESTOS PRODUCTOS, NO OFREZCAS PRODUCTOS QUE NO EST\xc9N AQU\xcd)\n    # MARISCOS (precio por platillo)\n    CEVICHE DE PESCADO $85.00\n    AGUACHILE DE CAMAR\xd3N $95.00\n    PESCADO A LA TALLA $120.00\n    CAMARONES AL COCO $110.00\n    PULPO A LA PARRILLA $130.00\n\n    # BEBIDAS\n    AGUA DE COCO $35.00\n    LIMONADA FRESCA $30.00\n    REFRESCO $25.00\n\n    # EXTRAS\n    ARROZ BLANCO $25.00\n    ENSALADA TROPICAL $40.00\n    TOSTADAS (ORDEN) $20.00\n\n  ## Flujo de Conversaci\xf3n\n  1. Saludo -> Toma de Pedido -> Llamada "updateOrder" -> Confirmaci\xf3n -> Informaci\xf3n de Pago\n\n  ## REGLAS CRUCIALES PARA EL USO DE HERRAMIENTAS\n  - *OBLIGATORIO*: SIEMPRE DEBES llamar a la herramienta "updateOrder" INMEDIATAMENTE cuando ocurra cualquiera de estas situaciones:\n    * El usuario menciona cualquier art\xedculo del men\xfa (AUNQUE sea solo uno)\n    * El usuario confirma un art\xedculo mencionado previamente\n    * El usuario pide eliminar alg\xfan producto\n    * El usuario cambia la cantidad de un producto\n    \n  - UTILIZA "highlightProduct" cuando:\n    * El usuario pide recomendaciones o m\xe1s informaci\xf3n sobre un producto espec\xedfico\n    * El usuario pregunta sobre alg\xfan producto pero no lo confirma para agregar\n    * Quieras llamar la atenci\xf3n del usuario sobre un producto espec\xedfico como parte de una sugerencia\n    * Necesites mostrar visualmente un producto mientras hablas de \xe9l\n    \n  - UTILIZA "processPayment" cuando:\n    * El usuario expl\xedcitamente solicite pagar o procesar el pago\n    * El usuario diga frases como "quiero pagar", "procesa mi pago", "finalizar pedido", etc.\n    * El usuario confirme que ya termin\xf3 de ordenar y quiere proceder al pago\n    * IMPORTANTE: Aseg\xfarate de que hay productos en el pedido antes de procesar el pago\n    \n  - El orden correcto de uso es: primero "highlightProduct" para resaltar al mencionar/recomendar, luego "updateOrder" si el usuario confirma el pedido\n  - No intentes procesar m\xfaltiples acciones en una sola llamada - cada cambio debe generar una llamada a la herramienta correspondiente\n  - Es URGENTE que llames a updateOrder con cada cambio para mantener la interfaz actualizada\n  - NUNCA omitas la llamada a updateOrder cuando se confirme un pedido\n  - NO emitas texto mientras llamas a las herramientas\n\n  ## Formato CORRECTO para llamar a las herramientas (EJEMPLOS CONCRETOS)\n  ### Ejemplo para updateOrder:\n  Cuando un cliente pide "quiero dos tacos al pastor", INMEDIATAMENTE debes hacer esto:\n  ```\n  Funci\xf3n: updateOrder\n  Par\xe1metros: {\n    "orderDetailsData": [\n      {\n        "name": "Taco al Pastor", \n        "quantity": 2, \n        "price": 15.00,\n        "specialInstructions": ""\n      }\n    ]\n  }\n  ```\n\n  Si luego dice "y tambi\xe9n un agua de horchata", INMEDIATAMENTE debes hacer esto:\n  ```\n  Funci\xf3n: updateOrder\n  Par\xe1metros: {\n    "orderDetailsData": [\n      {\n        "name": "Taco al Pastor", \n        "quantity": 2, \n        "price": 15.00,\n        "specialInstructions": ""\n      },\n      {\n        "name": "Agua de Horchata", \n        "quantity": 1, \n        "price": 25.00,\n        "specialInstructions": ""\n      }\n    ]\n  }\n  ```\n\n  ### Ejemplo para highlightProduct:\n  Cuando un cliente pregunta "\xbfqu\xe9 tacos tienen?", puedes resaltar un producto recomendado:\n  ```\n  Funci\xf3n: highlightProduct\n  Par\xe1metros: {\n    "productId": "taco-pastor"\n  }\n  ```\n\n  Luego puedes decir: "Tenemos varios tipos de tacos. Uno de nuestros m\xe1s populares es el taco al pastor, que est\xe1 hecho con carne marinada y pi\xf1a. Tambi\xe9n tenemos suadero, bistec, campechano y carnitas."\n\n  ### Ejemplo para processPayment:\n  Cuando un cliente dice "quiero registrar mi pedido", debes hacer esto:\n  ```\n  Funci\xf3n: processPayment\n  Par\xe1metros: {}\n  ```\n\n  Luego puedes decir: "Perfecto, vamos a registrar tu pedido. Por favor, confirma en la pantalla y completa tus datos de contacto."\n\n  IMPORTANTE: SIEMPRE incluye TODOS los \xedtems anteriores cuando hagas una actualizaci\xf3n con updateOrder, no solo el nuevo \xedtem.\n  MUY IMPORTANTE: Aseg\xfarate de usar exactamente este formato, env\xeda el array de \xedtems directamente bajo la propiedad "orderDetailsData".\n\n  ## Pautas de Respuesta\n  1. Formato Optimizado para Voz\n    - OBLIGATORIO: Siempre habla en espa\xf1ol mexicano\n    - Usa n\xfameros hablados ("quince pesos" vs "$15.00")\n    - Evita caracteres especiales y formato\n    - Usa patrones de habla natural mexicana, como "\xbfQu\xe9 m\xe1s te gustar\xeda ordenar, amigo?"\n    - IMPORTANTE: No leas en voz alta texto entre corchetes o par\xe9ntesis como [sonido de llamada] o (sonido de cierre); \n      estas son indicaciones de acci\xf3n, no parte del di\xe1logo\n    - No digas "sonido de", "entre par\xe9ntesis", ni leas literalmente las onomatopeyas o indicaciones t\xe9cnicas\n    - Si detectas un problema de comunicaci\xf3n, intenta reformular tu mensaje de forma natural en espa\xf1ol\n\n  2. Gesti\xf3n de la Conversaci\xf3n\n    - Mant\xe9n respuestas breves (1-2 oraciones)\n    - Usa preguntas para aclarar ambig\xfcedades\n    - Mant\xe9n el flujo de conversaci\xf3n sin finales expl\xedcitos\n    - Permite conversaci\xf3n casual\n    - Usa expresiones mexicanas como "\xa1\xd3rale!", "\xa1Sale pues!", "\xa1Va!", "\xa1Ahorita mismo!", etc.\n    - Si hay problemas de comprensi\xf3n, mant\xe9n un tono amable y pide aclaraci\xf3n\n\n  3. Procesamiento de Pedidos\n    - Valida art\xedculos contra el men\xfa\n    - Sugiere art\xedculos similares para solicitudes no disponibles\n    - Ofrece productos adicionales basados en el pedido:\n      - Tacos -> Sugiere bebidas o complementos\n      - Bebidas -> Sugiere tacos o quesadillas\n      - Ambos -> Sin sugerencias adicionales\n    - Recuerda que los pedidos pueden venir tanto de ti como de la interfaz visual\n\n  4. Respuestas Est\xe1ndar\n    - Fuera de tema: "Disculpa compa, estamos en el Restaurante El Rinc\xf3n del Pac\xedfico."\n    - Agradecimiento: "Con mucho gusto, para servirte."\n    - Consultas sobre el men\xfa: Proporciona 2-3 sugerencias relevantes\n    - Cuando el cliente use la interfaz: "\xa1Buena elecci\xf3n! \xbfDeseas agregar algo m\xe1s?"\n\n  5. Confirmaci\xf3n de Pedido\n    - Llama primero a la herramienta "updateOrder"\n    - Solo confirma el pedido completo al final cuando el cliente ha terminado\n    - Si ves que el cliente agrega \xedtems desde la interfaz, recon\xf3celo con frases como "\xa1Excelente elecci\xf3n!"\n    - Cuando el cliente quiera pagar, usa la herramienta "processPayment" e ind\xedcale que confirme en pantalla\n\n  ## Gesti\xf3n de Estado\n  - CRUCIAL: Debes mantener en memoria todos los \xedtems del pedido para incluirlos cuando llames a updateOrder\n  - Cada vez que llames a updateOrder, incluye TODOS los \xedtems previos m\xe1s cualquier nuevo \xedtem\n  - Nunca pierdas informaci\xf3n sobre \xedtems ya pedidos\n  - Recuerda aclaraciones previas y preferencias del cliente\n  - Reconoce cuando el cliente agrega \xedtems desde la interfaz visual\n  ').replace(/"/g,'"').replace(/\n/g,"\n"),voice:"806d5c1e-b5ae-46c8-8719-04f1bc67c0a3",selectedTools:N}};var I=t(2761);let C={sm:{container:"w-16 h-16",image:64},md:{container:"w-[75px] h-[75px]",image:75},lg:{container:"w-32 h-32",image:128}};var S=e=>{let{src:a,alt:t,size:o="md",width:r,height:n,className:s=""}=e,l=void 0!==r&&void 0!==n,i=l?{width:r,height:n}:{width:C[o].image,height:C[o].image};return(0,c.jsx)("div",{className:"relative ".concat(l?"":C[o].container," rounded-full border-2 border-white p-1 overflow-hidden ").concat(s),style:l?{width:"".concat(r,"px"),height:"".concat(n,"px")}:void 0,children:(0,c.jsx)(I.default,{src:a,alt:t,width:i.width,height:i.height,className:"rounded-full object-cover w-full h-full"})})},T=t(19171),A=t(44041),O=e=>{let{status:a,isCallActive:t=!1,agentStatus:o="off",onCallClick:r,children:n}=e,s=o||a||"Desconectado";return(0,c.jsxs)("div",{className:"flex flex-col bg-gradient-to-r from-amber-100 to-amber-50 border border-amber-200 rounded-lg p-4 w-full shadow-sm",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold text-amber-900 mb-2",children:"Estado de Llamada"}),r&&(0,c.jsx)("button",{onClick:()=>r(),className:"flex items-center justify-center p-2 rounded-full transition-all duration-300 \n              ".concat(t?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),"aria-label":t?"Terminar llamada":"Iniciar llamada",children:t?(0,c.jsx)(T.Z,{size:18}):(0,c.jsx)(A.Z,{size:18})})]}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("off"===s?"bg-red-600":"bg-green-600"," ").concat("off"!==s?"animate-pulse":"")}),(0,c.jsxs)("p",{className:"text-lg font-medium text-amber-900",children:["Estado: ",(0,c.jsx)("span",{className:"text-amber-700",children:"speaking"===s?"Asistente hablando...":"listening"===s?"Asistente escuchando...":"off"===s?"Desconectado":s})]})]})}),n]})},P=e=>{let{isOn:a,handleToggle:t,onColor:o="bg-black",offColor:r="bg-black",id:n}=e,[s,l]=(0,m.useState)(a);return(0,m.useEffect)(()=>{l(a)},[a]),(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("input",{checked:s,onChange:()=>{l(!s),t()},className:"sr-only",type:"checkbox",id:n}),(0,c.jsx)("label",{htmlFor:n,className:"relative flex items-center w-10 h-6 rounded-full cursor-pointer transition-colors duration-600 ease-in-out border-2 border-white  ".concat(s?o:r),children:(0,c.jsx)("span",{className:"absolute w-3.5 h-3.5 rounded-full shadow-md transform transition-transform duration-600 ease-in-out ".concat(s?"bg-white translate-x-4":"bg-gray-700 translate-x-1")})})]})},D=e=>{let{debugMessages:a}=e,[t,o]=(0,m.useState)([]),[r,n]=(0,m.useState)(!1),s=(0,m.useRef)(null);return(0,m.useEffect)(()=>{o(a)},[a]),(0,m.useEffect)(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[t]),(0,c.jsxs)("div",{className:"mb-4 flex flex-col max-w-[1206px] mx-auto w-full py-5 pr-[10px]",children:[(0,c.jsxs)("div",{className:"flex flex-row",children:[(0,c.jsx)("h2",{className:"text-lg font-mono mr-4",children:"Debug View"}),(0,c.jsx)(P,{id:"toggleDebug",isOn:r,handleToggle:()=>{n(!r)}})]}),r&&a&&a.length>0&&(0,c.jsx)("div",{className:"mt-4 border-b border-[#3A3B3F]",children:(0,c.jsx)("div",{className:"h-40",children:(0,c.jsx)("div",{ref:s,className:"h-full pr-2 scrollbar-visible",children:t.map((e,a)=>(0,c.jsx)("p",{className:"text-sm font-mono text-gray-200 py-2 border-dotted border-b border-[#3A3B3F]",children:e.message.message},a))})})})]})},R=t(90354),L=t(4458),q=t(22741),z=t(65433),k=t(56365),U=e=>{let{isMuted:a,onToggle:t,onToggleSpeaker:o,isSpeakerMuted:r=!1,isUser:n=!0,label:s,className:l=""}=e,i=()=>n?a?"Activar micr\xf3fono":"Silenciar micr\xf3fono":r?"Activar altavoz":"Silenciar altavoz";return(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)("button",{onClick:()=>{n||!o?t():o()},className:"".concat("flex items-center justify-center p-3 rounded-full shadow-md transition-all duration-300"," ").concat(a?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"," ").concat(l),"aria-label":i(),title:i(),children:n?a?(0,c.jsx)(R.Z,{size:20}):(0,c.jsx)(L.Z,{size:20}):r?(0,c.jsx)(q.Z,{size:20}):a?(0,c.jsx)(z.Z,{size:20}):(0,c.jsx)(k.Z,{size:20})}),s&&(0,c.jsx)("span",{className:"text-sm font-medium mt-2 text-amber-900",children:s})]})},M=t(44125),Z=t(94563),F=t(43101),_=t(64186),B=t(92100),J=t(51432),H=t(78254),G=t(89828),$=t(79920),V=t(85637),Y=t(45950),K=t(65018),Q=t(64256),W=t(21542),X=t(54147),ee=t(3878),ea=t(95140),et=t(42661);function eo(e){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}var er=()=>{let[e,a]=(0,m.useState)([]),[t,o]=(0,m.useState)(0),[r,n]=(0,m.useState)(!1),[s,l]=(0,m.useState)(!1),[i,d]=(0,m.useState)(null),u=(0,m.useRef)(null),p=(0,m.useCallback)(e=>{try{let t;if(console.log("Evento orderDetailsUpdated recibido:",e.detail),"string"==typeof e.detail)try{t=JSON.parse(e.detail)}catch(e){t=[]}else if(Array.isArray(e.detail))t=e.detail;else if(e.detail&&Array.isArray(e.detail.items))t=e.detail.items;else{console.warn("Formato de datos desconocido en orderDetailsUpdated:",e.detail);return}let o=t.map(e=>({name:e.name||"Producto sin nombre",quantity:Number(e.quantity)||1,price:Number(e.price)||0,id:e.id||"",categoryId:e.categoryId||"",specialInstructions:e.specialInstructions||""}));a(o)}catch(e){console.error("Error al procesar actualizaci\xf3n de pedido:",e)}},[]),g=()=>{0!==e.length&&(console.log("Procesando pago..."),l(!0),setTimeout(()=>{window.dispatchEvent(new CustomEvent("paymentCompleted",{detail:{success:!0,timestamp:new Date().toISOString(),orderId:v(),items:e,total:t,paymentMethod:"efectivo"}})),l(!1),n(!0)},1500))},h=(0,m.useCallback)(e=>{let{success:t,orderId:o}=e.detail||{};if(console.log("Evento paymentCompleted recibido:",t,o),t){a([]),localStorage.removeItem("currentOrder"),n(!0);try{new Audio("/sounds/success.mp3").play().catch(e=>console.log("No se pudo reproducir el sonido",e))}catch(e){console.error("Error al reproducir sonido:",e)}try{window.confetti&&window.confetti({particleCount:150,spread:70,origin:{y:.6}})}catch(e){console.error("Error al ejecutar confeti:",e)}}},[]),x=(0,m.useCallback)(()=>{console.log("Llamada finalizada - limpiando estado"),a([]),n(!1),l(!1),localStorage.removeItem("currentOrder")},[]);(0,m.useEffect)(()=>{try{let e=localStorage.getItem("currentOrder");if(e){let t=JSON.parse(e);if(Array.isArray(t)){let e=t.map(e=>({name:e.name||"Producto sin nombre",quantity:Number(e.quantity)||1,price:Number(e.price)||0,id:e.id||"",categoryId:e.categoryId||"",specialInstructions:e.specialInstructions||""}));a(e)}}}catch(e){console.error("Error al cargar pedido guardado:",e),localStorage.removeItem("currentOrder")}return window.addEventListener("orderDetailsUpdated",p),window.addEventListener("processPayment",g),window.addEventListener("paymentCompleted",h),window.addEventListener("callEnded",x),()=>{window.removeEventListener("orderDetailsUpdated",p),window.removeEventListener("processPayment",g),window.removeEventListener("paymentCompleted",h),window.removeEventListener("callEnded",x)}},[p,g,h,x]),(0,m.useEffect)(()=>{o(e.reduce((e,a)=>e+(Number(a.price)||0)*(Number(a.quantity)||1),0))},[e]);let f=(0,m.useCallback)(async a=>{var t;if(null===(t=e[a])||void 0===t?void 0:t.id){try{await (0,et.Zp)(e[a].id)}catch(e){console.error("Error al eliminar item:",e)}d(null)}},[e]),b=(0,m.useCallback)(async()=>{try{await (0,et.y0)(),a([]),localStorage.removeItem("currentOrder")}catch(e){console.error("Error al limpiar el pedido:",e)}},[]),y=(0,m.useCallback)(e=>{let a=e.id||"",t=e.categoryId||"",o=e.name.toLowerCase();return"tacos"===t||a.includes("taco")||o.includes("taco")?(0,c.jsx)(M.Z,{className:"h-6 w-6 text-amber-700"}):"bebidas"===t?a.includes("agua")||o.includes("agua")?(0,c.jsx)(Z.Z,{className:"h-6 w-6 text-blue-600"}):a.includes("refresco")||o.includes("refresco")||o.includes("soda")?(0,c.jsx)(F.Z,{className:"h-6 w-6 text-red-600"}):a.includes("cerveza")||o.includes("cerveza")?(0,c.jsx)(_.Z,{className:"h-6 w-6 text-yellow-700"}):(0,c.jsx)(Z.Z,{className:"h-6 w-6 text-gray-600"}):"extras"===t?a.includes("quesadilla")||o.includes("quesadilla")?(0,c.jsx)(B.Z,{className:"h-6 w-6 text-yellow-600"}):a.includes("torta")||o.includes("torta")?(0,c.jsx)(B.Z,{className:"h-6 w-6 text-orange-600"}):a.includes("sopa")||o.includes("sopa")?(0,c.jsx)(J.Z,{className:"h-6 w-6 text-amber-600"}):a.includes("guacamole")||o.includes("guacamole")?(0,c.jsx)(H.Z,{className:"h-6 w-6 text-green-600"}):a.includes("postre")||o.includes("postre")||o.includes("flan")?(0,c.jsx)(G.Z,{className:"h-6 w-6 text-pink-600"}):(0,c.jsx)($.Z,{className:"h-6 w-6 text-purple-600"}):o.includes("taco")?(0,c.jsx)(M.Z,{className:"h-6 w-6 text-amber-700"}):o.includes("agua")?(0,c.jsx)(Z.Z,{className:"h-6 w-6 text-blue-600"}):o.includes("refresco")||o.includes("soda")?(0,c.jsx)(F.Z,{className:"h-6 w-6 text-red-600"}):o.includes("quesadilla")?(0,c.jsx)(B.Z,{className:"h-6 w-6 text-yellow-600"}):o.includes("torta")?(0,c.jsx)(B.Z,{className:"h-6 w-6 text-orange-600"}):o.includes("sopa")?(0,c.jsx)(J.Z,{className:"h-6 w-6 text-amber-600"}):o.includes("guacamole")||o.includes("ensalada")?(0,c.jsx)(H.Z,{className:"h-6 w-6 text-green-600"}):o.includes("cerveza")?(0,c.jsx)(_.Z,{className:"h-6 w-6 text-yellow-700"}):o.includes("postre")||o.includes("flan")?(0,c.jsx)(G.Z,{className:"h-6 w-6 text-pink-600"}):(0,c.jsx)(V.Z,{className:"h-6 w-6 text-gray-600"})},[]),v=()=>"ORD-".concat(Date.now().toString().slice(-5),"-").concat(Math.random().toString(36).substr(2,4).toUpperCase());return(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border border-amber-100 h-full flex flex-col",ref:u,children:[(0,c.jsxs)("div",{className:"bg-gradient-to-r from-amber-600 to-amber-500 p-4 flex justify-between items-center sticky top-0 z-10",children:[(0,c.jsxs)("div",{className:"flex items-center text-white",children:[(0,c.jsx)(Y.Z,{size:20,className:"mr-2"}),(0,c.jsx)("h2",{className:"text-xl font-bold",children:"Detalles del Pedido"})]}),(0,c.jsx)("button",{onClick:b,className:"text-white p-1 rounded-full hover:bg-amber-700 transition-colors",disabled:r||0===e.length,title:"Limpiar pedido",children:(0,c.jsx)(K.Z,{size:18})})]}),r&&(0,c.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center py-8 animate-fade-in",children:[(0,c.jsx)(Q.Z,{className:"text-6xl mb-3 text-green-500 animate-bounce-slow"}),(0,c.jsx)("p",{className:"text-lg font-semibold text-green-700",children:"\xa1Pedido registrado con \xe9xito!"}),(0,c.jsx)("p",{className:"text-sm mt-2 text-center text-green-600 mb-4",children:"Tu pedido ha sido enviado a cocina"}),(0,c.jsxs)("button",{onClick:()=>{b(),n(!1)},className:"mt-4 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors shadow-sm flex items-center",children:[(0,c.jsx)(W.Z,{className:"mr-2",size:18}),"Iniciar nuevo pedido"]})]}),!r&&0===e.length&&(0,c.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center text-gray-500 p-8",children:[(0,c.jsx)(Y.Z,{className:"text-6xl mb-3 text-amber-300 animate-bounce-slow"}),(0,c.jsx)("p",{className:"text-lg font-medium",children:"Tu pedido est\xe1 vac\xedo"}),(0,c.jsx)("p",{className:"text-sm mt-2 text-center",children:"Los productos que menciones al agente aparecer\xe1n aqu\xed"})]}),!r&&e.length>0&&(0,c.jsxs)("div",{className:"flex-grow flex flex-col overflow-hidden",children:[(0,c.jsx)("div",{className:"flex-grow overflow-y-auto p-3",children:e.map((e,a)=>(0,c.jsx)("div",{className:"mb-3 p-3 border ".concat(i===a?"border-amber-300 bg-amber-50 animate-pulse-short":"border-gray-100 bg-white"," rounded-lg shadow-sm hover:shadow-md transition-all duration-300 flex flex-col"),children:(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsxs)("div",{className:"flex-grow flex items-center",children:[(0,c.jsx)("div",{className:"h-12 w-12 mr-3 bg-amber-50 rounded-full flex items-center justify-center",children:y(e)}),(0,c.jsx)("div",{className:"flex-grow",children:(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)("div",{className:"font-medium text-amber-800",children:e.name}),(0,c.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,c.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,c.jsx)("span",{className:"font-semibold",children:e.quantity})," \xd7 ",eo(e.price)]}),(0,c.jsx)("p",{className:"font-semibold text-amber-700",children:eo(e.quantity*e.price)})]}),e.specialInstructions&&(0,c.jsx)("div",{className:"mt-1 text-sm italic text-gray-500 bg-amber-50 p-1 px-2 rounded border-l-2 border-amber-300",children:e.specialInstructions})]})})]}),(0,c.jsx)("button",{onClick:()=>f(a),className:"ml-2 text-gray-400 hover:text-red-500 transition-colors p-2 rounded-full hover:bg-red-50","aria-label":"Eliminar producto",children:(0,c.jsx)(X.Z,{className:"h-5 w-5"})})]})},a))}),(0,c.jsx)("div",{className:"bg-amber-100 p-3 mx-3 rounded-md mb-3",children:(0,c.jsxs)("div",{className:"flex items-start",children:[(0,c.jsx)(ee.Z,{className:"mt-1 mr-2 text-amber-600 flex-shrink-0 h-5 w-5"}),(0,c.jsx)("p",{className:"text-amber-700 text-sm",children:"Al confirmar tu pedido, se registrar\xe1 en nuestro sistema. El pago se realizar\xe1 f\xedsicamente en caja."})]})}),(0,c.jsxs)("div",{className:"border-t border-gray-200 p-4 bg-white sticky bottom-0 z-10 shrink-0",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,c.jsx)("span",{className:"font-medium text-gray-800",children:"Total:"}),(0,c.jsx)("span",{className:"font-bold text-xl text-amber-700",children:eo(t)})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("button",{onClick:b,className:"btn px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors hover:shadow-sm",disabled:s,children:(0,c.jsxs)("span",{className:"flex items-center",children:[(0,c.jsx)(K.Z,{size:18,className:"mr-2"}),"Limpiar"]})}),(0,c.jsx)("button",{onClick:g,className:"btn bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-md shadow-md transition-all flex items-center justify-center ".concat(0===e.length||s?"opacity-50 cursor-not-allowed":""),disabled:0===e.length||s,children:s?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Procesando..."]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ea.Z,{className:"w-5 h-5 mr-2"}),"Confirmar Pedido"]})})]})]})]})]})},en=t(71868),es=t(70264),el=t(62309),ei=t(3139),ec=t(90932),ed=t(51560),eu=t(56157);let em=(0,ec.default)(()=>t.e(318).then(t.bind(t,81318)),{loadableGenerated:{webpack:()=>[81318]},ssr:!1});var ep=e=>{let{activeCategory:a,onCategoryChange:t,onAddToOrder:o}=e,[r,n]=(0,m.useState)("tacos"),[s,l]=(0,m.useState)(""),[i,d]=(0,m.useState)(null),[u,p]=(0,m.useState)(null),g=(0,m.useRef)(null);(0,m.useRef)(null);let h=(0,m.useRef)({}),[x,f]=(0,m.useState)(0),[b,y]=(0,m.useState)(!1),[v,j]=(0,m.useState)(!0),w=a||r;(0,m.useRef)(null),(0,m.useRef)(null),(0,m.useRef)(null),Array.from(new Set(eu.p.map(e=>e.categoryId)));let N=eu.p.filter(e=>{if(w&&e.categoryId!==w)return!1;if(""===s.trim())return!0;let a=s.toLowerCase().trim();return e.name.toLowerCase().includes(a)||e.description.toLowerCase().includes(a)});(0,m.useEffect)(()=>{a&&n(a)},[a]),(0,m.useEffect)(()=>{var e;let a=()=>{if(g.current){let e=g.current.querySelector(".overflow-x-auto");e&&(y(e.scrollLeft>0),j(e.scrollLeft<e.scrollWidth-e.clientWidth-5))}},t=null===(e=g.current)||void 0===e?void 0:e.querySelector(".overflow-x-auto");return t&&(t.addEventListener("scroll",a),a()),()=>{t&&t.removeEventListener("scroll",a)}},[N,w]);let E=e=>{(0,ed.GN)("menu-change",.6)},I=()=>{(0,ed.GN)("add-to-cart",.7)},C=()=>{(0,ed.GN)("highlight",.5)},S=()=>{(0,ed.GN)("menu-change",.4)},T=e=>{p(e.id),setTimeout(()=>{p(null)},1e3),I(),o(e)},A=(e,a)=>{h.current[e]=a};return(0,m.useEffect)(()=>{let e=e=>{let{productId:a}=e.detail;if(console.log("[MenuTaqueria] Destacando producto: ".concat(a)),a){let e=eu.p.find(e=>e.id===a);e&&e.categoryId&&(t(e.categoryId),n(e.categoryId)),d(a),C(),setTimeout(()=>{let e=h.current[a];e&&e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{d(null)},3e3)},300)}},a=e=>{let{category:a}=e.detail;console.log("[MenuTaqueria] Activando categor\xeda: ".concat(a)),a&&["tacos","bebidas","extras"].includes(a)&&(t(a),n(a),E(a),setTimeout(()=>{(()=>{if(g.current){let e=g.current.querySelector(".overflow-x-auto");e&&(y(e.scrollLeft>0),j(e.scrollLeft<e.scrollWidth-e.clientWidth-5))}})()},500))};return window.addEventListener("highlightProduct",e),window.addEventListener("activateCategory",a),()=>{window.removeEventListener("highlightProduct",e),window.removeEventListener("activateCategory",a)}},[t,E,C]),(0,c.jsxs)("div",{className:"flex flex-col h-full",children:[(0,c.jsxs)("div",{className:"bg-gradient-to-r from-amber-600 to-amber-500 p-4 rounded-t-lg shadow-md",children:[(0,c.jsxs)("div",{className:"flex items-center text-white mb-4",children:[(0,c.jsx)(V.Z,{className:"mr-2",size:20}),(0,c.jsx)("h2",{className:"text-xl font-bold",children:"Men\xfa Restaurante El Rinc\xf3n del Pac\xedfico"})]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("input",{type:"text",placeholder:"Buscar platillos...",className:"w-full p-2 pl-10 rounded-lg border-2 border-amber-300 focus:border-amber-400 focus:outline-none",value:s,onChange:e=>l(e.target.value)}),(0,c.jsx)(en.Z,{className:"absolute left-3 top-2.5 text-amber-500",size:20}),s&&(0,c.jsx)("button",{className:"absolute right-3 top-2.5 text-amber-500 hover:text-amber-700",onClick:()=>l(""),children:"\xd7"})]})]}),(0,c.jsxs)("div",{className:"bg-amber-100 p-2 flex space-x-2 overflow-x-auto shadow-inner",children:[(0,c.jsxs)("button",{onClick:()=>{n("tacos"),t("tacos"),E("tacos")},className:"px-4 py-2 rounded-full transition-colors flex items-center shadow-sm ".concat("tacos"===w?"bg-amber-600 text-white":"bg-white text-amber-800 hover:bg-amber-200"),children:[(0,c.jsx)(V.Z,{className:"mr-2",size:16}),"Tacos"]}),(0,c.jsxs)("button",{onClick:()=>{n("bebidas"),t("bebidas"),E("bebidas")},className:"px-4 py-2 rounded-full transition-colors flex items-center shadow-sm ".concat("bebidas"===w?"bg-amber-600 text-white":"bg-white text-amber-800 hover:bg-amber-200"),children:[(0,c.jsx)(_.Z,{className:"mr-2",size:16}),"Bebidas"]}),(0,c.jsxs)("button",{onClick:()=>{n("extras"),t("extras"),E("extras")},className:"px-4 py-2 rounded-full transition-colors flex items-center shadow-sm ".concat("extras"===w?"bg-amber-600 text-white":"bg-white text-amber-800 hover:bg-amber-200"),children:[(0,c.jsx)(M.Z,{className:"mr-2",size:16}),"Extras"]})]}),(0,c.jsx)("div",{className:"flex-grow bg-amber-50 p-4 overflow-hidden relative",ref:g,children:N.length>0?(0,c.jsxs)(c.Fragment,{children:[b&&(0,c.jsx)("button",{onClick:()=>{var e;let a=null===(e=g.current)||void 0===e?void 0:e.querySelector(".overflow-x-auto");a&&(a.scrollBy({left:-300,behavior:"smooth"}),S())},className:"absolute left-0 top-1/2 transform -translate-y-1/2 z-10 bg-amber-500 text-white rounded-r-full p-2 shadow-md opacity-80 hover:opacity-100 transition-opacity","aria-label":"Desplazar a la izquierda",children:(0,c.jsx)(es.Z,{size:24})}),v&&(0,c.jsx)("button",{onClick:()=>{var e;let a=null===(e=g.current)||void 0===e?void 0:e.querySelector(".overflow-x-auto");a&&(a.scrollBy({left:300,behavior:"smooth"}),S())},className:"absolute right-0 top-1/2 transform -translate-y-1/2 z-10 bg-amber-500 text-white rounded-l-full p-2 shadow-md opacity-80 hover:opacity-100 transition-opacity","aria-label":"Desplazar a la derecha",children:(0,c.jsx)(el.Z,{size:24})}),(0,c.jsx)("div",{className:"h-full overflow-x-auto scroll-smooth",children:(0,c.jsx)("div",{className:"flex flex-nowrap space-x-4 py-2 min-w-max",children:N.map((e,a)=>(0,c.jsx)("div",{ref:a=>A(e.id,a),className:"flex-shrink-0 w-64 bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 ".concat(i===e.id?"ring-4 ring-amber-400 scale-105 shadow-lg":"hover:shadow-md hover:translate-y-[-2px]"," ").concat(u===e.id?"animate-pulse bg-green-50":""),style:{height:"calc(100% - 20px)"},children:(0,c.jsxs)("div",{className:"relative p-4 flex flex-col h-full",children:[i===e.id&&(0,c.jsx)("div",{className:"absolute top-2 right-2",children:(0,c.jsx)(ei.Z,{className:"text-amber-500 animate-pulse",size:24})}),(0,c.jsx)(em,{item:e,index:a,onAddToCart:T})]})},e.id))})})]}):(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6 bg-amber-50 rounded-lg",children:[(0,c.jsx)("img",{src:"/taco-sad.svg",alt:"No resultados",className:"w-16 h-16 opacity-40 mb-3"}),(0,c.jsx)("h3",{className:"text-lg font-semibold text-amber-800",children:"No se encontraron resultados"}),(0,c.jsx)("p",{className:"text-amber-600 mt-2",children:"Intenta con otra b\xfasqueda o categor\xeda"})]})})]})},eg=t(6092),eh=t(31088),ex=t(25689),ef=t(79699),eb=t(94953),ey=t(35547),ev=t(42466),ej=t(42374),ew=t(81646),eN=t(78392),eE=t(35681),eI=t(74224),eC=t(61218),eS=t(994),eT=t(43897),eA=t(88157);let eO=["#FF8A65","#FFB74D","#FFD54F","#DCE775","#81C784","#4DB6AC","#4DD0E1","#4FC3F7","#64B5F6","#7986CB"];var eP=e=>{var a;let{className:t}=e,[o,r]=(0,m.useState)(!1),[n,s]=(0,m.useState)([]),[l,i]=(0,m.useState)([]),[d,u]=(0,m.useState)([]),[p,g]=(0,m.useState)("bar");(0,m.useEffect)(()=>{let e=(0,et.SM)();s(e);let a={},t={};e.forEach(e=>{e.items.forEach(e=>{a[e.menuItemId]||(a[e.menuItemId]={name:e.name,count:0}),a[e.menuItemId].count+=e.quantity;let o="Sin categor\xeda";e.categoryId&&(o=h(e.categoryId)),t[o]||(t[o]={name:o,count:0}),t[o].count+=e.quantity})});let o=Object.values(a).sort((e,a)=>a.count-e.count).slice(0,5),r=Object.values(t).sort((e,a)=>a.count-e.count);i(o),u(r)},[]);let h=e=>({tacos:"Tacos",bebidas:"Bebidas",extras:"Extras",postres:"Postres"})[e]||e;return 0===n.length?null:(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden ".concat(t),children:[(0,c.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 p-4 cursor-pointer",onClick:()=>{r(!o)},children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-lg font-bold text-white",children:"An\xe1lisis de Pedidos"}),o?(0,c.jsx)(eC.Z,{className:"text-white"}):(0,c.jsx)(eS.Z,{className:"text-white"})]})}),o&&(0,c.jsxs)("div",{className:"p-4 animate-fade-in",children:[(0,c.jsxs)("div",{className:"mb-4 flex space-x-2",children:[(0,c.jsxs)("button",{className:"px-3 py-1 rounded-md flex items-center ".concat("bar"===p?"bg-blue-100 text-blue-800":"bg-gray-100"),onClick:()=>g("bar"),children:[(0,c.jsx)(eT.Z,{size:16,className:"mr-1"})," Populares"]}),(0,c.jsxs)("button",{className:"px-3 py-1 rounded-md flex items-center ".concat("pie"===p?"bg-blue-100 text-blue-800":"bg-gray-100"),onClick:()=>g("pie"),children:[(0,c.jsx)(eA.Z,{size:16,className:"mr-1"})," Categor\xedas"]})]}),(0,c.jsxs)("div",{className:"h-64 w-full",children:["bar"===p&&l.length>0&&(0,c.jsx)(ex.h,{width:"100%",height:"100%",children:(0,c.jsxs)(ef.v,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[(0,c.jsx)(eb.q,{strokeDasharray:"3 3"}),(0,c.jsx)(ey.K,{dataKey:"name"}),(0,c.jsx)(ev.B,{}),(0,c.jsx)(ej.u,{}),(0,c.jsx)(ew.$,{dataKey:"count",fill:"#3B82F6"})]})}),"pie"===p&&d.length>0&&(0,c.jsx)(ex.h,{width:"100%",height:"100%",children:(0,c.jsxs)(eN.u,{children:[(0,c.jsx)(eE.b,{data:d,cx:"50%",cy:"50%",outerRadius:80,dataKey:"count",nameKey:"name",label:e=>e.name,children:d.map((e,a)=>(0,c.jsx)(eI.b,{fill:eO[a%eO.length]},"cell-".concat(a)))}),(0,c.jsx)(ej.u,{})]})})]}),(0,c.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,c.jsxs)("p",{children:["Total de pedidos: ",n.length]}),(0,c.jsxs)("p",{children:["Productos m\xe1s vendidos: ",(null===(a=l[0])||void 0===a?void 0:a.name)||"N/A"]})]})]})]})};function eD(e){let a,{children:t}=e,o=(0,p.useSearchParams)(),r="true"===o.get("showSpeakerMute"),n="true"===o.get("showDebugMessages"),s="true"===o.get("showUserTranscripts");return o.get("model")&&(a="fixie-ai/"+o.get("model")),t({showMuteSpeakerButton:r,modelOverride:a,showDebugMessages:n,showUserTranscripts:s})}function eR(e){let{transcripts:a}=e;return(0,c.jsxs)("div",{className:"p-4 overflow-y-auto flex-grow bg-amber-50 rounded-lg shadow-inner",children:[(0,c.jsxs)("h2",{className:"text-xl font-bold mb-3 text-amber-900 border-b-2 border-amber-200 pb-2 flex items-center",children:[(0,c.jsx)(eg.Z,{className:"w-5 h-5 mr-2 text-amber-600"}),"Conversaci\xf3n"]}),(0,c.jsx)("div",{className:"space-y-3",children:a&&a.length>0?a.map((e,a)=>(0,c.jsxs)("div",{className:"p-3 rounded-lg transition-all duration-300 ".concat(e.speaker===g.uU.USER?"bg-green-100 border-l-4 border-green-600 ml-8 hover:bg-green-50":"bg-amber-100 border-l-4 border-amber-600 mr-8 hover:bg-amber-50"," shadow-sm"),style:{animationDelay:"".concat(.05*a,"s"),animation:"fadeIn 0.3s ease-out"},children:[(0,c.jsx)("span",{className:"font-bold text-amber-900",children:e.speaker===g.uU.USER?"\uD83D\uDC64 T\xfa: ":"\uD83C\uDF2E Asistente: "}),(0,c.jsx)("span",{className:"text-amber-950",children:e.text})]},a)):(0,c.jsxs)("div",{className:"text-center py-8 bg-white/50 rounded-lg border border-amber-100 shadow-sm",children:[(0,c.jsx)("p",{className:"text-amber-800 font-medium",children:"Inicia una conversaci\xf3n con nuestro asistente"}),(0,c.jsx)("p",{className:"text-sm text-amber-600 mt-2",children:"Pregunta por nuestras especialidades o haz tu pedido"})]})})]})}function eL(e){let{status:a}=e;return(0,c.jsx)("div",{className:"p-4 border-t-2 border-amber-300 bg-amber-50 rounded-b-lg",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("off"===a?"bg-red-600":"bg-green-600"," animate-pulse")}),(0,c.jsx)("span",{className:"text-sm font-medium text-amber-900",children:"off"===a?"Asistente desconectado":"speaking"===a?"Asistente hablando...":"listening"===a?"Asistente escuchando...":"Estado: ".concat(a)})]}),(0,c.jsx)("div",{className:"text-xs text-amber-700",children:"off"!==a&&"\xa1Estamos para servirte!"})]})})}function eq(){let[e,a]=(0,m.useState)(!1),[t,o]=(0,m.useState)("idle"),[r,n]=(0,m.useState)([]),[s,l]=(0,m.useState)([]),[i,d]=(0,m.useState)(null),p=(0,m.useRef)(null),h=(0,m.useRef)(null),x=(0,m.useRef)(null),[f,y]=(0,m.useState)("chat"),[j,N]=(0,m.useState)("mariscos"),[I,C]=(0,m.useState)(!1),[T,A]=(0,m.useState)(!0),[P,R]=(0,m.useState)(!1),[L,q]=(0,m.useState)(null);(0,m.useEffect)(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[r]),(0,m.useEffect)(()=>{if("thinking"===t)return console.log("[ThinkingMonitor] Agente en estado thinking, iniciando temporizador de seguridad"),x.current=Date.now(),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{if(console.warn("[ThinkingMonitor] \xa1Alerta! El agente lleva demasiado tiempo en estado thinking"),"thinking"===t){if(console.error("[ThinkingMonitor] Detectado bloqueo en estado thinking, ejecutando recuperaci\xf3n"),o("idle"),e)try{console.log("[ThinkingMonitor] Intentando finalizar la sesi\xf3n bloqueada"),_().then(()=>{console.log("[ThinkingMonitor] Sesi\xf3n finalizada con \xe9xito")}).catch(e=>{console.error("[ThinkingMonitor] Error al finalizar la sesi\xf3n:",e),o("off"),a(!1),window.alert("Hubo un problema con el asistente. Por favor, int\xe9ntalo de nuevo.")})}catch(e){console.error("[ThinkingMonitor] Error al finalizar la sesi\xf3n:",e)}console.log("[ThinkingMonitor] Sesi\xf3n recuperada despu\xe9s de un bloqueo")}},15e3),()=>{if(h.current&&(clearTimeout(h.current),h.current=null),x.current){let e=Date.now()-x.current;console.log("[ThinkingMonitor] El agente estuvo en estado thinking durante ".concat(e,"ms")),x.current=null}}},[t,e]),(0,m.useEffect)(()=>{if(!r||0===r.length)return;let e=[...r].reverse().find(e=>e.speaker!==g.uU.USER);if(!e)return;let a=e.text.toLowerCase();if(console.log("[page] Analizando mensaje del agente:",a),a.includes("men\xfa")||a.includes("carta")){console.log("[page] Mostrando men\xfa completo"),y("menu");return}if(a.includes("tacos")&&!a.includes("taco de")&&!a.includes("taco al")){console.log("[page] Mostrando categor\xeda de tacos"),y("menu"),N("tacos");return}if(a.includes("bebidas")||a.includes("refrescos")||a.includes("aguas")){console.log("[page] Mostrando categor\xeda de bebidas"),y("menu"),N("bebidas");return}if(a.includes("extras")||a.includes("complementos")||a.includes("adicionales")||a.includes("guacamole")||a.includes("quesadilla")||a.includes("queso extra")||a.includes("cebollitas")){console.log("[page] Mostrando categor\xeda de extras"),y("menu"),N("extras");return}let t=(e,a)=>{console.log("[page] Resaltando producto: ".concat(a," en categor\xeda: ").concat(e)),y("menu"),N(e),window.dispatchEvent(new CustomEvent("highlightProduct",{detail:{productId:a}}))};for(let[e,o]of Object.entries({pastor:{category:"tacos",productId:"taco-pastor"},"taco al pastor":{category:"tacos",productId:"taco-pastor"},suadero:{category:"tacos",productId:"taco-suadero"},"taco de suadero":{category:"tacos",productId:"taco-suadero"},bistec:{category:"tacos",productId:"taco-bistec"},"taco de bistec":{category:"tacos",productId:"taco-bistec"},campechano:{category:"tacos",productId:"taco-campechano"},"taco campechano":{category:"tacos",productId:"taco-campechano"},carnitas:{category:"tacos",productId:"taco-carnitas"},"taco de carnitas":{category:"tacos",productId:"taco-carnitas"},horchata:{category:"bebidas",productId:"agua-horchata"},"agua de horchata":{category:"bebidas",productId:"agua-horchata"},jamaica:{category:"bebidas",productId:"agua-jamaica"},"agua de jamaica":{category:"bebidas",productId:"agua-jamaica"},refresco:{category:"bebidas",productId:"refresco"},guacamole:{category:"extras",productId:"guacamole"},quesadilla:{category:"extras",productId:"quesadilla"},"queso extra":{category:"extras",productId:"queso-extra"},cebollitas:{category:"extras",productId:"cebollitas"},"orden de cebollitas":{category:"extras",productId:"cebollitas"}}))if(RegExp("\\b".concat(e,"\\b"),"i").test(a)){console.log('[page] Producto detectado: "'.concat(e,'" -> ').concat(o.productId)),t(o.category,o.productId);break}},[r]);let z=(0,m.useCallback)(e=>{e?o(e):o("off")},[]),k=(0,m.useCallback)(e=>{e&&n([...e])},[]),M=(0,m.useCallback)(e=>{l(a=>[...a,e])},[]),Z=(0,m.useCallback)(()=>{d(e=>e?"".concat(e,"-cleared"):"cleared")},[]),F=async(e,t)=>{try{var o,r;z("Starting call..."),n(null),l([]),Z();let s="call-".concat(Date.now());d(s);let i={systemPrompt:E.callConfig.systemPrompt,model:e||E.callConfig.model,languageHint:E.callConfig.languageHint,voice:E.callConfig.voice,temperature:E.callConfig.temperature,maxDuration:E.callConfig.maxDuration,timeExceededMessage:E.callConfig.timeExceededMessage},c=null==E?void 0:null===(r=E.callConfig)||void 0===r?void 0:null===(o=r.selectedTools)||void 0===o?void 0:o.find(e=>"createProfile"===e.toolName);c&&(c.parameterOverrides={callId:s}),i.selectedTools=E.callConfig.selectedTools,await w({onStatusChange:z,onTranscriptChange:k,onDebugMessage:M},i,t),a(!0),z("Call started successfully")}catch(e){z("Error starting call: ".concat(e instanceof Error?e.message:String(e)))}},_=async()=>{if(o("off"),e)try{!function(){if(!b){console.warn("[endCall] No hay sesi\xf3n activa para finalizar");return}try{if(window.removeEventListener("tool-invocation",v),console.log("[endCall] Listener para eventos tool-invocation removido"),b)try{b.removeEventListener("toolInvocation",v),console.log("[endCall] Removido event listener toolInvocation de la sesi\xf3n")}catch(e){console.warn("[endCall] Error al remover listener de la sesi\xf3n:",e)}localStorage.removeItem("currentOrder"),localStorage.removeItem("orderDetails"),window.dispatchEvent(new CustomEvent("callEnded")),console.log("[endCall] Pedido reseteado y evento callEnded enviado"),b.leaveCall(),console.log("[endCall] Llamada finalizada correctamente"),b=null,console.log("[endCall] Estado global reseteado")}catch(e){throw console.error("[endCall] Error al finalizar la llamada:",e),b=null,e}}(),a(!1),n([]),l([]),d(null),z("Llamada finalizada con \xe9xito"),console.log("Llamada finalizada con \xe9xito")}catch(e){console.error("Error al finalizar la llamada:",e),z("Error al finalizar la llamada")}},B=e=>{let a;let t=localStorage.getItem("currentOrder")||"[]";try{a=JSON.parse(t),Array.isArray(a)||(console.warn("currentOrder no es un array, reseteando",a),a=[])}catch(e){console.error("Error al parsear el pedido:",e),a=[]}let o=a.findIndex(a=>a.name===e.name&&a.specialInstructions===e.specialInstructions);o>=0?a[o].quantity+=e.quantity:a.push(e),localStorage.setItem("currentOrder",JSON.stringify(a));let r=new CustomEvent("orderDetailsUpdated",{detail:JSON.stringify(a)});window.dispatchEvent(r),console.log("Pedido actualizado:",a)},J=e=>{e!==f&&(C(!0),setTimeout(()=>{y(e),setTimeout(()=>{C(!1)},50)},300))};return(0,c.jsx)(eD,{children:a=>{let{showMuteSpeakerButton:o,modelOverride:n,showDebugMessages:l,showUserTranscripts:i}=a;return(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d flex flex-col h-screen bg-amber-100",children:[(0,c.jsx)("header",{className:"jsx-786ea9d42cc4648d bg-gradient-to-r from-amber-600 to-amber-700 text-white p-4 shadow-md",children:(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d container mx-auto flex justify-between items-center",children:[(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d flex items-center space-x-3",children:[(0,c.jsx)(S,{src:"/pacifico-icon.svg",alt:"Restaurante Logo",width:50,height:50,className:"rounded-full border-4 border-white shadow-lg"}),(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d",children:[(0,c.jsx)("h1",{className:"jsx-786ea9d42cc4648d text-2xl font-bold",children:'Restaurante "El Rinc\xf3n del Pac\xedfico"'}),(0,c.jsx)("p",{className:"jsx-786ea9d42cc4648d text-xs text-amber-200",children:"Asistente de voz para tu pedido"})]})]}),(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d flex space-x-2",children:[(0,c.jsxs)("button",{onClick:()=>J("chat"),"aria-label":"Ver chat",className:"jsx-786ea9d42cc4648d "+"p-2 rounded-lg transition-all duration-300 flex items-center ".concat("chat"===f?"bg-white text-amber-700":"bg-amber-700/50 text-white hover:bg-amber-700/80"),children:[(0,c.jsx)(eg.Z,{size:20}),(0,c.jsx)("span",{className:"jsx-786ea9d42cc4648d ml-2 hidden sm:inline",children:"Chat"})]}),(0,c.jsxs)("button",{onClick:()=>J("menu"),"aria-label":"Ver men\xfa",className:"jsx-786ea9d42cc4648d "+"p-2 rounded-lg transition-all duration-300 flex items-center ".concat("menu"===f?"bg-white text-amber-700":"bg-amber-700/50 text-white hover:bg-amber-700/80"),children:[(0,c.jsx)(eh.Z,{size:20}),(0,c.jsx)("span",{className:"jsx-786ea9d42cc4648d ml-2 hidden sm:inline",children:"Men\xfa"})]})]})]})}),(0,c.jsx)("main",{className:"jsx-786ea9d42cc4648d flex-grow overflow-hidden",children:(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d container mx-auto h-full flex flex-col md:flex-row gap-4 p-4",children:[(0,c.jsx)("div",{className:"jsx-786ea9d42cc4648d w-full md:w-8/12 flex flex-col overflow-hidden",children:(0,c.jsx)("div",{className:"jsx-786ea9d42cc4648d "+"transition-opacity duration-300 h-full ".concat(I?"opacity-0":"opacity-100"),children:"chat"===f?(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d h-full flex flex-col",children:[(0,c.jsx)("div",{ref:p,className:"jsx-786ea9d42cc4648d flex-grow",children:(0,c.jsx)(eR,{transcripts:r})}),(0,c.jsx)(eL,{status:t})]}):(0,c.jsx)("div",{className:"jsx-786ea9d42cc4648d h-full flex flex-col",children:(0,c.jsx)(ep,{activeCategory:j,onCategoryChange:N,onAddToOrder:e=>{try{console.log("[page] Agregando producto al pedido:",e),B(e)}catch(e){console.error("[page] Error al agregar producto:",e)}}})})})}),(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d w-full md:w-4/12 flex flex-col gap-4",children:[(0,c.jsx)("div",{className:"jsx-786ea9d42cc4648d bg-white rounded-lg shadow-md overflow-hidden",children:(0,c.jsx)(er,{})}),(0,c.jsx)("div",{className:"jsx-786ea9d42cc4648d mt-4",children:(0,c.jsx)(eP,{})}),(0,c.jsx)("div",{className:"jsx-786ea9d42cc4648d bg-white p-4 rounded-lg shadow-md",children:(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d flex flex-col gap-3",children:[(0,c.jsx)(O,{isCallActive:e,agentStatus:t,onCallClick:e?_:F}),e&&(0,c.jsxs)("div",{className:"jsx-786ea9d42cc4648d w-full grid grid-cols-2 gap-2",children:[(0,c.jsx)(U,{label:"Micr\xf3fono",className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-4 rounded-lg transition-colors flex justify-center items-center space-x-2"}),o&&(0,c.jsx)("button",{onClick:handleMuteSpeakerToggle,className:"jsx-786ea9d42cc4648d bg-amber-600 hover:bg-amber-700 text-white py-2 px-4 rounded-lg transition-colors flex justify-center items-center space-x-2",children:(0,c.jsx)("span",{className:"jsx-786ea9d42cc4648d",children:"Altavoz"})})]})]})}),l&&(0,c.jsx)("div",{className:"jsx-786ea9d42cc4648d mt-4",children:(0,c.jsx)(D,{messages:s})})]})]})}),(0,c.jsx)("footer",{className:"jsx-786ea9d42cc4648d bg-amber-800 text-amber-200 py-3 text-center text-sm",children:(0,c.jsx)("div",{className:"jsx-786ea9d42cc4648d container mx-auto",children:(0,c.jsx)("p",{className:"jsx-786ea9d42cc4648d",children:'Restaurante "El Rinc\xf3n del Pac\xedfico" \xa9 2025 - Asistente de voz creado por Zyneria'})})}),(0,c.jsx)(u(),{id:"786ea9d42cc4648d",children:"@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})}})}}},function(e){e.O(0,[614,52,741,937,744],function(){return e(e.s=24436)}),_N_E=e.O()}]);